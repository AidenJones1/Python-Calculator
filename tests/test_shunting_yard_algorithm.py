from src.application.calculator.calculator_utils import shunting_yard_algorithm

def test_shunting_yard_algorithm():
    cases = [
        # Basic operations
        ("1+2", ['1', '2', '+']),
        ("3-4", ['3', '4', '-']),
        ("5*6", ['5', '6', '*']),
        ("8/2", ['8', '2', '/']),
        ("2^3", ['2', '3', '^']),
        
        # Multi-digit numbers
        ("12+34", ['12', '34', '+']),
        ("100-25", ['100', '25', '-']),
        ("45*3", ['45', '3', '*']),
        ("80/4", ['80', '4', '/']),
        ("10^2", ['10', '2', '^']),

        # Simple decimal numbers
        ("1.5+2.3", ['1.5', '2.3', '+']),
        ("3.0-1.2", ['3.0', '1.2', '-']),
        ("4.25*2", ['4.25', '2', '*']),
        ("10/2.5", ['10', '2.5', '/']),
        ("2.5^3", ['2.5', '3', '^']),
        
        # Mixed operators
        ("3+4*2", ['3', '4', '2', '*', '+']),
        ("7*8+9", ['7', '8', '*', '9', '+']),
        ("9+5*6-3", ['9', '5', '6', '*', '+', '3', '-']),
        ("2*3^4", ['2', '3', '4', '^', '*']),
        ("5+6^2*3", ['5', '6', '2', '^', '3', '*', '+']),
        
        # Parentheses
        ("(1+2)*3", ['1', '2', '+', '3', '*']),
        ("(4+5)*6", ['4', '5', '+', '6', '*']),
        ("(7*(8+9))", ['7', '8', '9', '+', '*']),
        ("(10+2)^3", ['10', '2', '+', '3', '^']),
        ("(2+3)*(4+5)", ['2', '3', '+', '4', '5', '+', '*']),
        
        # Nested parentheses
        ("((1+2)*3)", ['1', '2', '+', '3', '*']),
        ("(1+(2*3))", ['1', '2', '3', '*', '+']),
        ("((2+3)*(4-5))", ['2', '3', '+', '4', '5', '-', '*']),
        ("(1+(2+(3+4)))", ['1', '2', '3', '4', '+', '+', '+']),
        ("((1+2)^3)*4", ['1', '2', '+', '3', '^', '4', '*']),
        
        # Operator precedence tests
        ("2+3*4", ['2', '3', '4', '*', '+']),
        ("2*3+4", ['2', '3', '*', '4', '+']),
        ("2^3^4", ['2', '3', '4', '^', '^']),
        ("3+4*2/(1-5)", ['3', '4', '2', '*', '1', '5', '-', '/', '+']),
        ("5*(6+2)/4", ['5', '6', '2', '+', '*', '4', '/']),
        
        # Complex expressions
        ("(3+4)*5^2", ['3', '4', '+', '5', '2', '^', '*']),
        ("7+(6*5^2+3)-4", ['7', '6', '5', '2', '^', '*', '3', '+', '+', '4', '-']),
        ("(8+2*5)/(1+3*2-4)", ['8', '2', '5', '*', '+', '1', '3', '2', '*', '+', '4', '-', '/']),
        ("5+(6-2)*9+3^(7-1)", ['5', '6', '2', '-', '9', '*', '+', '3', '7', '1', '-', '^', '+']),
        ("(3+(4*5))*6", ['3', '4', '5', '*', '+', '6', '*']),
        
        # Multiple layers and right associativity
        ("2^(3^2)", ['2', '3', '2', '^', '^']),
        ("((2^3)^2)", ['2', '3', '^', '2', '^']),
        ("2^((3+1)*2)", ['2', '3', '1', '+', '2', '*', '^']),
        ("((2+3)^2)^3", ['2', '3', '+', '2', '^', '3', '^']),
        ("(5*(2+3))^2", ['5', '2', '3', '+', '*', '2', '^']),
        
        # Long numbers and mixed ops
        ("123+456*789", ['123', '456', '789', '*', '+']),
        ("9999/33+12", ['9999', '33', '/', '12', '+']),
        ("55*(22+33)", ['55', '22', '33', '+', '*']),
        ("42*(7+8*(9-3))", ['42', '7', '8', '9', '3', '-', '*', '+', '*']),
        ("(10*(6/3))+(2^3)", ['10', '6', '3', '/', '*', '2', '3', '^', '+']),

        # Mixed decimals and integers
        ("3+4.5*2", ['3', '4.5', '2', '*', '+']),
        ("6.2+5-1.1", ['6.2', '5', '+', '1.1', '-']),
        ("8.8/2+1", ['8.8', '2', '/', '1', '+']),
        ("7*2.5-4", ['7', '2.5', '*', '4', '-']),
        ("2^3.5", ['2', '3.5', '^']),

        # Parentheses and precedence
        ("(1.2+3.4)*2", ['1.2', '3.4', '+', '2', '*']),
        ("(5+6.6)/3.3", ['5', '6.6', '+', '3.3', '/']),
        ("2*(3.5+4.5)", ['2', '3.5', '4.5', '+', '*']),
        ("(1.1+2.2)*(3.3+4.4)", ['1.1', '2.2', '+', '3.3', '4.4', '+', '*']),
        ("(10.5-5.25)^2", ['10.5', '5.25', '-', '2', '^']),

        # Nested parentheses and mixed operators
        ("(1.5+(2.5*3.0))", ['1.5', '2.5', '3.0', '*', '+']),
        ("(2.5^2.0)*3", ['2.5', '2.0', '^', '3', '*']),
        ("3+(4.5*(2.25-1.25))", ['3', '4.5', '2.25', '1.25', '-', '*', '+']),
        ("(6.0/(2.0+1.0))", ['6.0', '2.0', '1.0', '+', '/']),
        ("((1.1+2.2)*3.3)-4.4", ['1.1', '2.2', '+', '3.3', '*', '4.4', '-']),
    ]

    for expr, expected in cases:
        assert shunting_yard_algorithm(expr) == expected
